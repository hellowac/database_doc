# ClickHouse

官网：<https://clickhouse.com/docs/en/>

[MergeTree]: https://clickhouse.com/docs/en/engines/table-engines/mergetree-family/mergetree/

ClickHouse拥有完备的管理功能，所以它称得上是一个DBMS（Database Management System，数据库管理系统），而不仅是一个数据库。一些基本功能，如下所示：

- **DDL**（数据定义语言）：可以动态地创建、修改或删除数据库、表和视图，而无须重启服务。
- **DML**（数据操作语言）：可以动态查询、插入、修改或删除数据。
- **权限控制**：可以按照用户粒度设置数据库或者表的操作权限，保障数据的安全性。
- **数据备份与恢复**：提供了数据备份导出与导入恢复机制，满足生产环境的要求。
- **分布式管理**：提供集群模式，能够自动管理多个数据库节点。

ClickHouse就是一款使用`列式存储`的数据库，数据按列进行组织，属于同一列的数据会被保存在一起，列与列之间也会由不同的文件分别保存. 【主要针对[MergeTree]引擎】

ClickHouse目前利用`SSE4.2指令集`实现向量化执行。

ClickHouse是大小写敏感的，这意味着`SELECT a`和`SELECT A`所代表的语义是不同的。

ClickHouse在数据存取方面，既支持分区（纵向扩展，利用多线程原理），也支持分片（横向扩展，利用分布式原理），ClickHouse将多线程和分布式的技术应用到了极致。

ClickHouse则采用`Multi-Master多主架构`，集群中的每个节点角色对等，客户端访问任意一个节点都能得到相同的效果。

ClickHouse支持分片，而分片则依赖集群。每个集群由1到多个分片组成，而每个分片则对应了ClickHouse的1个服务节点。分片的数量上限取决于节点数量（1个分片只能对应1个服务节点）。【数据分片是将数据进行横向切分，这是一种在面对海量数据的场景下，解决存储和查询瓶颈的有效手段，是一种分治思想的体现。】

ClickHouse提供了本地表（Local Table）与分布式表（Distributed Table）的概念。一张本地表等同于一份数据的分片。而分布式表本身不存储任何数据，它是本地表的访问代理，其作用类似分库中间件。借助分布式表，能够代理访问多个数据分片，从而实现分布式查询。
